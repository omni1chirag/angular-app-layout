<div class="flex flex-col w-full min-h-screen sm:flex-row ">
    <!-- Sidebar -->
    <div
        class="w-full flex sm:w-64 sm:flex md:sticky lg:sticky top-[calc(var(--navbar-height)+1rem)] sm:h-[calc(100vh-var(--navbar-height)-2.25rem)]">
        <p-menu [model]="modules" #menu id="patient-menu" class="w-full h-full"
            styleClass="w-full flex flex-col  h-full">
            <ng-template pTemplate="start">

                <div class="flex flex-col items-center w-full max-w-sm p-2" *ngIf="clinicProfile && doctorProfile">
                    <!-- Doctor Avatar Section -->
                    <div class="flex flex-col items-center w-full gap-2">
                        <p-avatar *ngIf="blobUrl" [image]="blobUrl" shape="circle" size="xlarge"
                            class="border border-gray-200"></p-avatar>

                        <p-avatar *ngIf="!blobUrl" icon="pi pi-user" [label]="doctorInitials" shape="circle"
                            size="xlarge" [style]="{
        'background-color': 'var(--p-primary-color)',
        'color': '#fff'
      }" class="border border-gray-200"></p-avatar>

                        <!-- Doctor Details -->
                        <div class="mt-2 text-center w-full min-w-0">
                            <p class="!mb-0 text-lg font-semibold text-gray-900 truncate">
                                {{ doctorProfile.title }} {{ doctorProfile.firstName }} {{ doctorProfile.lastName }}
                            </p>
                            <p class="mb-1 text-sm text-gray-600 truncate">
                                {{ doctorProfile.specialities }}
                            </p>
                        </div>
                    </div>

                    <p-divider></p-divider>

                    <div class="w-full max-w-md gap-2 mx-auto text-gray-800">
                        <div class="flex flex-col items-center space-y-2 text-center">
                            <!-- Clinic Name -->
                            <p class="!mb-[0.3rem] text-lg font-semibold truncate">{{ clinicProfile.clinicName }}</p>

                            <!-- Contact Info -->
                            <div class="flex flex-col items-center space-y-1 text-sm">
                                <a [href]="'tel:+91' + clinicProfile.mobileNumber"
                                    class="flex items-center gap-2 hover:underline">
                                    <i class="text-base text-gray-500 pi pi-phone"></i>
                                    <span>+91 {{ maskMobile(clinicProfile.mobileNumber) }}</span>
                                </a>

                                <a [href]="'mailto:' + clinicProfile.email"
                                    class="flex items-center gap-2 hover:underline">
                                    <i class="text-base text-gray-500 pi pi-envelope"></i>
                                    <span>{{ clinicProfile.email }}</span>
                                </a>
                            </div>

                            <!-- Address -->
                            <div class="mt-2 text-sm leading-snug text-center text-gray-600">
                                <i class="mr-1 text-gray-500 pi pi-map-marker"></i>
                                <span>
                                    {{ clinicProfile.address1 }}
                                    <ng-container *ngIf="clinicProfile.address2">, {{ clinicProfile.address2
                                        }}</ng-container><br />
                                    {{ clinicProfile.city }}, {{ clinicProfile.state }} - {{ clinicProfile.pincode }}
                                </span>
                            </div>
                        </div>
                    </div>

                    <p-button label="{{ 'CHARTING.DOWNLOAD_VISIT_REPORT' | translate }}" [disabled]="loading"
                        [styleClass]="'w-full mt-4'" severity="primary"
                        (onClick)="generateVisitReport(patientId, appointmentId)"></p-button>
                </div>

            </ng-template>

            <ng-template pTemplate="submenuheader" let-item>
                <span class="hidden font-bold sm:block">{{ item.label }} </span>
            </ng-template>

            <ng-template pTemplate="item" let-item>
                <a pRipple class="items-center hidden sm:block" [attr.href]="'#' + item.value"
                    (click)="scrollTo(item.value)" [attr.data-section]="item.value">
                    <span class="ml-2 p-menu-item-link">{{ item.label }}</span>
                </a>
            </ng-template>
        </p-menu>
    </div>

    <!-- Main Content -->
    <div class="flex-1 mt-4 ml-0 sm:ml-4">
        <app-clinical-summary (clinicProfile)="clinicProfile = $event" (doctorProfile)="doctorProfileChange($event)"
            (appointmentIdChange)="appointmentId = $event"></app-clinical-summary>
    </div>
</div>